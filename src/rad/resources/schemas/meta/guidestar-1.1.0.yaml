%YAML 1.1
---
$schema: asdf://stsci.edu/datamodels/roman/schemas/rad_schema-1.0.0
id: asdf://stsci.edu/datamodels/roman/schemas/meta/guidestar-1.1.0

title: Guide Star and Guide Window Information

type: object
properties:
  guide_window_id:
    $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/guide_window_id-1.0.0
  guide_mode:
    allOf:
      - $ref: asdf://stsci.edu/datamodels/roman/schemas/enums/guidewindow_modes-1.0.0
    sdf:
      special_processing: VALUE_REQUIRED
      source:
        origin: TBD
    archive_catalog:
      datatype: nvarchar(18)
      destination: [WFIExposure.guide_mode, GuideWindow.guide_mode]
  window_xstart:
    title: Guide Window X Start Position (pixels)
    description: |
      Minimum X position in pixels in the science coordinate
      frame of all tracking guide windows in this exposure.
    type: integer
    sdf:
      special_processing: VALUE_REQUIRED
      source:
        origin: Science Data Formatting
    archive_catalog:
      datatype: int
      destination: [WFIExposure.window_xstart]
  window_ystart:
    title: Guide Window Y Start Position (pixels)
    description: |
      Minimum Y position in pixels in the science coordinate
      frame of all tracking guide windows in this exposure.
    type: integer
    sdf:
      special_processing: VALUE_REQUIRED
      source:
        origin: Science Data Formatting
    archive_catalog:
      datatype: int
      destination: [WFIExposure.window_ystart]
  window_xstop:
    title: Guide Window X Stop Position (pixels)
    description: |
      Maximum X position in pixels in the science coordinate
      frame of all tracking guide windows in this exposure.
    type: integer
    sdf:
      special_processing: VALUE_REQUIRED
      source:
        origin: Science Data Formatting
    archive_catalog:
      datatype: int
      destination: [WFIExposure.window_xstop]
  window_ystop:
    title: Guide Window Y Start Position (pixels)
    description: |
      Maximum Y position in pixels in the science coordinate
      frame of all tracking guide windows in this exposure.
    type: integer
    sdf:
      special_processing: VALUE_REQUIRED
      source:
        origin: Science Data Formatting
    archive_catalog:
      datatype: int
      destination: [WFIExposure.window_ystop]
  guide_star_id:
    title: Guide Star Identifier
    description: |
      Identification of the guide star from the Guide Star Catalog (GSC).
      This is based on planned information from the Roman Planning and
      Scheduling Subsystem.
    type: string
    sdf:
      special_processing: VALUE_REQUIRED
      source:
        origin: PSS:dms_guide_star.star_id
    maxLength: 20
    archive_catalog:
      datatype: nvarchar(20)
      destination: [WFIExposure.guide_star_id, GuideWindow.guide_star_id]
  epoch:
    title: Guide Star Coordinates Epoch
    description: |
      Epoch of the celestial coordinates of the guide star
      from the Guide Star Catalog (GSC).
    type: string
    sdf:
      special_processing: VALUE_REQUIRED
      source:
        origin: TBD
    maxLength: 10
    archive_catalog:
      datatype: nvarchar(10)
      destination: [WFIExposure.epoch, GuideWindow.epoch]
  jitter_major:
    title: Major Axis Jitter (milliarcseconds)
    description: Estimate of the guidestar jitter kernel width (in
      milliarcseconds) along the major axis of the jitter kernel.
      When no guidestar was observed with this detector, a default
      value will be used.
    type: number
  jitter_minor:
    title: Minor Axis Jitter (milliarcseconds)
    description: Estimate of the guidestar jitter kernel width (in
      milliarcseconds) along the minor axis of the jitter kernel.
      When no guidestar was observed with this detector, a default
      value will be used.
    type: number
  jitter_position_angle:
    title: Jitter Position Angle (deg)
    description: Position angle (in degrees) of the jitter kernel in the
      science coordinate system. The position angle is the angle of the
      major axis relative to the +Y axis, with PA increasing as the
      major axis moves toward the +X axis. When no guidestar was
      observed with this detector, a default value will be used.
    type: number
required:
  [
    guide_window_id,
    guide_mode,
    window_xstart,
    window_ystart,
    window_xstop,
    window_ystop,
    guide_star_id,
    epoch,
  ]
