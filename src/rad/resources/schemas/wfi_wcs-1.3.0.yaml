%YAML 1.1
---
$schema: asdf://stsci.edu/datamodels/roman/schemas/rad_schema-1.0.0
id: asdf://stsci.edu/datamodels/roman/schemas/wfi_wcs-1.3.0

title: Level 2 (L2) WCS information for Roman Wide Field Instrument (WFI) Rate Image.

datamodel_name: WfiWcsModel

type: object
properties:
  meta:
    allOf:
      - $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/basic-1.0.0
      - type: object
        properties:
          coordinates:
            $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/coordinates-1.0.0
          ephemeris:
            $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/ephemeris-1.0.0
          exposure:
            $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/exposure-1.0.0
          instrument:
            $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/wfi_mode-1.0.0
          observation:
            $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/observation-1.0.0
          pointing:
            $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/pointing-1.0.0
          program:
            $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/program-1.0.0
          velocity_aberration:
            $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/velocity_aberration-1.0.0
          visit:
            $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/visit-1.0.0
          wcsinfo:
            $ref: asdf://stsci.edu/datamodels/roman/schemas/meta/wcsinfo-1.0.0
          wcs_fit_results:
            title: tweakreg/GAIA fit results
            description: |
              Results from the tweakreg result when aligning to GAIA.
              If missing or None, GAIA alignment was not done or failed.
            type: object
        required:
          [
            coordinates,
            ephemeris,
            exposure,
            instrument,
            observation,
            pointing,
            program,
            velocity_aberration,
            visit,
            wcsinfo,
          ]
  wcs_l2:
    title: L2 GWCS
    description: |
      The GWCS object for the Level 2 product that generated it.
      If the `tweakreg` step is successfully done, this will be the
      GAIA-aligned wcs.
    tag: tag:stsci.edu:gwcs/wcs-*
  wcs_l1:
    title: L1 GWCS
    description: |
      The GWCS object derived from the Level 2 GWCS but with an extra shift
      and expanded bounding box to account for the larger data array size of
      the Level 1 product.
    tag: tag:stsci.edu:gwcs/wcs-*
propertyOrder: [meta, wcs_l2, wcs_l1]
flowStyle: block
required: [meta]
